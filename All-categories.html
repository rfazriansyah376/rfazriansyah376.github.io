---
layout: null
permalink: /All-categories.html
---

<style>
:root {
  --primary: #0366d6;
  --text: #222;
  --muted: #555;
  --border: #e5e5e5;
  --bg: #f9f9f9;
}
body {
  font-family: system-ui, sans-serif;
  color: var(--text);
  background: #fff;
  line-height: 1.6;
  margin: 0;
  padding: 2rem 1rem;
  max-width: 800px;
  margin-inline: auto;
}
h2 {
  font-size: 1.5rem;
  margin-bottom: 1rem;
}
.all-categories {
  margin-bottom: 2.5rem;
}
.category-grid {
  display: flex;
  flex-wrap: wrap;
  gap: .6rem;
  padding: 0;
  list-style: none;
}
.category-grid li {
  margin: 0;
}
.category-link {
  display: inline-block;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: .4rem .9rem;
  color: var(--primary);
  text-decoration: none;
  font-weight: 500;
  transition: all .2s ease;
}
.category-link:hover, .category-link.active {
  background: var(--primary);
  color: #fff;
  border-color: var(--primary);
}
#post-list {
  list-style: none;
  padding: 0;
}
.post-item {
  border-bottom: 1px solid var(--border);
  padding: 1rem 0;
}
.post-item:last-child {
  border: none;
}
.post-item a {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--primary);
  text-decoration: none;
}
.post-item a:hover {
  text-decoration: underline;
}
.post-date {
  color: var(--muted);
  font-size: .9rem;
}
.excerpt {
  margin-top: .3rem;
  color: var(--muted);
}
#back-link {
  display: none;
  margin-top: 2rem;
}
#back-link a {
  color: var(--muted);
  text-decoration: none;
}
#back-link a:hover {
  text-decoration: underline;
}
</style>

<div class="all-categories">
  <h2>All Categories</h2>
  <ul class="category-grid" id="category-list">
    {% assign category_counts = {} %}
    {% for post in site.posts %}
      {% if post.categories %}
        {% for cat in post.categories %}
          {% assign key = cat | slugify %}
          {% if category_counts[key] %}
            {% assign category_counts = category_counts | merge: 
              { key => category_counts[key] | plus: 1 } %}
          {% else %}
            {% assign category_counts = category_counts | merge: 
              { key => 1 } %}
          {% endif %}
        {% endfor %}
      {% endif %}
    {% endfor %}

    {% assign category_array = "" | split: "" %}
    {% for key in category_counts %}
      {% assign category_array = category_array | push: 
        key[0] | append: "::" | append: category_counts[key[0]] %}
    {% endfor %}
    {% assign sorted_categories = category_array | sort_natural: "desc" %}
    {% comment %}
      Sort manual akan dilakukan di JS agar urutan berdasarkan jumlah (karena Liquid sulit untuk sort numerik secara dinamis tanpa plugin)
    {% endcomment %}

    {% for post in site.posts %}
      {% for cat in post.categories %}
        {% unless all_categories contains cat %}
          {% assign all_categories = all_categories | push: cat %}
        {% endunless %}
      {% endfor %}
    {% endfor %}
    {% assign all_categories = all_categories | uniq %}
    {% assign all_categories = all_categories | sort %}

    {% for category in all_categories %}
      {% assign slug = category | slugify %}
      {% assign count = 0 %}
      {% for post in site.posts %}
        {% if post.categories contains category %}
          {% assign count = count | plus: 1 %}
        {% endif %}
      {% endfor %}
      <li data-category="{{ slug }}" data-count="{{ count }}">
        <a href="/All-categories.html?category={{ slug }}" class="category-link">
          {{ category | capitalize }} ({{ count }})
        </a>
      </li>
    {% endfor %}
  </ul>
</div>

<div id="category-posts">
  <h2 id="posts-heading">Posts</h2>
  <ul id="post-list"></ul>
</div>

<div id="back-link"><a href="/All-categories.html">‚Üê Back to all categories</a></div>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const params = new URLSearchParams(window.location.search);
  const selectedCategory = params.get("category");
  const postList = document.getElementById("post-list");
  const heading = document.getElementById("posts-heading");
  const backLink = document.getElementById("back-link");
  const catLinks = document.querySelectorAll(".category-link");
  const catList = document.getElementById("category-list");

  // --- Sort kategori berdasarkan jumlah posting (desc) ---
  const items = Array.from(catList.children);
  items.sort((a, b) => parseInt(b.dataset.count) - parseInt(a.dataset.count));
  items.forEach(i => catList.appendChild(i));

  // --- Data posts dihasilkan oleh Liquid ---
  const posts = [
    {% for post in site.posts %}
      {
        title: "{{ post.title | escape }}",
        url: "{{ post.url | absolute_url }}",
        date: "{{ post.date | date: '%b %d, %Y' }}",
        categories: [{% for cat in post.categories %}"{{ cat | slugify }}"{% unless forloop.last %}, {% endunless %}{% endfor %}],
        excerpt: "{{ post.excerpt | strip_html | strip_newlines | truncate: 140 }}"
      }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ];

  if (selectedCategory) {
    const filtered = posts.filter(p => p.categories.includes(selectedCategory));
    const capitalized = selectedCategory.charAt(0).toUpperCase() + selectedCategory.slice(1);
    heading.textContent = "Posts in: " + capitalized;
    backLink.style.display = "block";

    catLinks.forEach(link => {
      if (link.href.includes("?category=" + selectedCategory)) link.classList.add("active");
    });

    // SEO dinamis
    document.title = capitalized + " | " + "{{ site.title | default: 'My Jekyll Site' }}";
    let metaDesc = document.querySelector('meta[name="description"]');
    if (!metaDesc) {
      metaDesc = document.createElement("meta");
      metaDesc.name = "description";
      document.head.appendChild(metaDesc);
    }
    metaDesc.content = "Browse posts under category " + capitalized + ".";

    if (filtered.length === 0) {
      postList.innerHTML = "<p>No posts found in this category.</p>";
    } else {
      postList.innerHTML = filtered.map(p => `
        <li class="post-item">
          <a href="${p.url}">${p.title}</a>
          <div class="post-date">${p.date}</div>
          <div class="excerpt">${p.excerpt}</div>
        </li>
      `).join("");
    }
  } else {
    heading.textContent = "Select a category to view posts";
    postList.innerHTML = "<p style='color:var(--muted);'>Choose a category above to explore related posts.</p>";
  }
});
</script>
