<!-- awal include verif mengambil dari folder /includes/verif/ -->
<div class="spo-verif" id="spo-verif-dynamic-include" loading="lazy"></div>
<script>
(function() {
  const spoVerifHost = window.location.hostname.toLowerCase();
  const spoVerifParts = spoVerifHost.split(".");
  const spoVerifContainer = document.getElementById("spo-verif-dynamic-include");

  // Nama subdomain dan domain utama
  let spoVerifSub = spoVerifParts.length > 2
    ? spoVerifParts[0].replace(/[^a-z0-9\-]/g, "")
    : null;

  let spoVerifDom = spoVerifParts.length > 2
    ? spoVerifParts[1].replace(/[^a-z0-9\-]/g, "")
    : spoVerifParts[0].replace(/[^a-z0-9\-]/g, "");

  // Kandidat file sesuai aturan
  let spoVerifSubFile = spoVerifSub ? spoVerifSub + ".html" : null;
  let spoVerifDomFile = spoVerifDom + ".html";
  let spoVerifFallback = "fallback.html";

  // Fungsi loader dengan nama unik
  function spoVerifLoadFile(list) {
    if (list.length === 0) return;

    const file = list.shift();
    fetch("/includes/verif/" + file)
      .then(r => {
        if (!r.ok) throw new Error("not found");
        return r.text();
      })
      .then(html => spoVerifContainer.innerHTML = html)
      .catch(() => spoVerifLoadFile(list));
  }

  // Susun urutan fallback
  const spoVerifFiles = [];
  if (spoVerifSubFile) spoVerifFiles.push(spoVerifSubFile);
  spoVerifFiles.push(spoVerifDomFile);
  spoVerifFiles.push(spoVerifFallback);

  // Jalankan loader
  spoVerifLoadFile(spoVerifFiles);
})();
</script>
<!-- akhir include verif -->
