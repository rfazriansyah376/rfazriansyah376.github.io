<!-- spo universal verif include (body load, head inject) -->
<script>
(function() {
  function run() {
    const host = window.location.hostname.toLowerCase();
    const parts = host.split(".");
    const clean = v => v.replace(/[^a-z0-9\-]/g, "");

    /* ===== TARGET INJECT ===== */
    const target = document.head || document.getElementsByTagName("head")[0];
    if (!target) return;

    /* ===== CONTAINER KHUSUS HEAD ===== */
    const id = "spo-verif-head-include";
    let container = document.getElementById(id);
    if (!container) {
      container = document.createElement("div");
      container.id = id;
      container.style.display = "none";
      target.appendChild(container);
    }

    const files = [];
    const fallback = "fallback.html";

    /* ===== PRIORITAS PLATFORM ===== */
    if (host.endsWith("github.io")) {
      files.push("github.html");
    } else if (host.endsWith("pages.dev")) {
      files.push("pages.html");
    } else {
      const sub = parts.length > 2 ? clean(parts[0]) : null;
      const dom = parts.length > 1
        ? clean(parts[parts.length - 2])
        : clean(parts[0]);

      if (sub) files.push(sub + ".html");
      files.push(dom + ".html");
    }

    files.push(fallback);

    /* ===== LOADER ===== */
    function load(list) {
      if (!list.length) return;

      const file = list.shift();
      fetch("/verif/" + file)
        .then(r => {
          if (!r.ok) throw new Error("skip");
          return r.text();
        })
        .then(html => {
          container.innerHTML = html;
        })
        .catch(() => load(list));
    }

    load(files);
  }

  /* ===== BODY SAFE ===== */
  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", run);
  } else {
    run();
  }
})();
</script>
<!-- end spo universal verif -->
