<!-- spo dynamic include verif (universal & powerfull) -->
<div class="spo-verif" id="spo-verif-dynamic-include" loading="lazy"></div>
<script>
(function() {
  const host = window.location.hostname.toLowerCase();
  const parts = host.split(".");
  const container = document.getElementById("spo-verif-dynamic-include");
  if (!container) return;

  const clean = v => v.replace(/[^a-z0-9\-]/g, "");
  const fallbackFile = "fallback.html";
  const files = [];

  /* ===== PLATFORM PRIORITY (GLOBAL) ===== */
  if (host.endsWith("github.io")) {
    files.push("github.html");
  } else if (host.endsWith("pages.dev")) {
    files.push("pages.html");
  } else {
    /* ===== DOMAIN NORMAL ===== */
    const sub = parts.length > 2 ? clean(parts[0]) : null;
    const dom = parts.length > 1
      ? clean(parts[parts.length - 2])
      : clean(parts[0]);

    if (sub) files.push(sub + ".html");
    files.push(dom + ".html");
  }

  files.push(fallbackFile);

  /* ===== LOADER (STABLE & SAFE) ===== */
  function load(list) {
    if (!list.length) return;

    const file = list.shift();
    fetch("/_x/verif/" + file)
      .then(r => {
        if (!r.ok) throw new Error("skip");
        return r.text();
      })
      .then(html => {
        container.innerHTML = html;
      })
      .catch(() => load(list));
  }

  load(files);
})();
</script>
<!-- end spo dynamic include -->
