<div id="random-include"></div>

<script>
(function () {

  const container = document.getElementById("random-include");
  if (!container) return;

  async function loadRandomInclude() {
    try {

      const res = await fetch("/assets/data/includes.json?v=" + Date.now(), {
        cache: "no-store"
      });

      if (!res.ok) return;

      const files = await res.json();
      if (!Array.isArray(files) || files.length === 0) return;

      const randomFile = files[Math.floor(Math.random() * files.length)];

      const htmlRes = await fetch(
        "/includes/" + randomFile + "?v=" + Date.now(),
        { cache: "no-store" }
      );

      if (!htmlRes.ok) return;

      container.innerHTML = await htmlRes.text();

    } catch (err) {
      console.error("Random include error:", err);
    }
  }

  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", loadRandomInclude);
  } else {
    loadRandomInclude();
  }

})();
</script>
